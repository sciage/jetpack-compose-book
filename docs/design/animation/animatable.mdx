---
id: animatable
title: Animatable
---

import demoGif from '@site/static/img/design/animation/animatable/demo1.gif'
import demo2Gif from '@site/static/img/design/animation/animatable/demo2.gif'

`Animatable` is a basic `API` that can provide initial values. The `animate*AsState` series of APIs are internally customized using `Animatable`. When you want to animate a custom data type, you can choose to use `Animatable` to do it

## 1. Simple to use

Next, we'll still use the little red heart we used when we introduced `animate*AsState` as an example. Instead, this time we use the `Animatable` contained within it to do it directly.

It is worth noting that when we use `Animatable` in `Composable`, it must be wrapped in `remember`. If you do not do this, the compiler will intimately prompt you to add `rememeber` .

> Creating an Animatable during composition without using remember

Looking at the `Animatable` parameter list, you can see that a parameter named `Dp.Companion.VectorConverter` is passed in. This is actually a type converter `TwoWayConverter`. For `Animatable`, only the Float type is known. When you use a common type like Dp, Google has provided it by extending the property in the companion object of the corresponding type. When you adapt `Animatable` for custom types, you need to customize `TwoWayConverter`.

It is also worth noting that for `Animatable`, the animation value update needs to be done in the coroutine, which is to call the `animateTo` method. At this point we need to make sure that the initial state of the `Animatable` is the same as when the `LaunchedEffect` code block was first executed. In our example, we use `Animatable(24.dp, Dp.Companion.VectorConverter)` to declare the initial state of the `Animatable` to be `24.dp`, since the `LaunchedEffect` code block will follow the `Composable` first execution once , so the state and initial state corresponding to `change` is `24.dp` at this time, otherwise the animation effect of buttonSize `24.dp -> 32.dp` will be automatically performed after the page is rendered without human clicking.
```kotlin
@Preview
@Composable
fun Demo() {
    var change by remember{ mutableStateOf(false) }
    var flag by remember{ mutableStateOf(false) }

    val buttonSizeVariable = remember {
        Animatable(24.dp, Dp.Companion.VectorConverter)
    }

    LaunchedEffect(change) {
        buttonSizeVariable.animateTo(if(change) 32.dp else 24.dp)
    }
    if(buttonSizeVariable.value == 32.dp) {
        change = false
    }
    IconButton(
        onClick = {
            change = true
            flag = !flag
        }
    ) {
        Icon(
            Icons.Rounded.Favorite,
            contentDescription = null,
            modifier = Modifier.size(buttonSizeVariable.value),
            tint = if(flag) Color.Red else Color.Gray
        )
    }
}
```

<img src={demoGif} />
Strike while the iron is hot, let's see how another example is done using `Animatable`.

```kotlin
@Preview
@Composable
fun Demo() {
    var text by remember{ mutableStateOf("") }
    var focusState by remember { mutableStateOf(false)}
    var sizeVariable = remember {
        Animatable(0f)
    }

    LaunchedEffect(focusState) {
        sizeVariable.animateTo(if(focusState) 1f else 0.5f)
    }
    Column(
        modifier = Modifier.fillMaxWidth()
    ) {
        TextField(
            value = text,
            onValueChange = {
                text = it
            },
            modifier = Modifier
                .align(Alignment.CenterHorizontally)
                .onFocusChanged {
                    focusState = it.isFocused
                }
                .fillMaxWidth(sizeVariable.value)
        )
    }
}
````

<img src={demo2Gif} />

As with `animate*AsState`, you can customize the animation specification by providing an `AnimationSpec` by setting the second parameter of `animateTo`. See [AnimationSpec](./overview#animationspec) for more information.

```kotlin
suspend fun animateTo(
 	targetValue: T,
 	animationSpec: AnimationSpec<T> = defaultSpringSpec,
 	initialVelocity: T = velocity,
 	block: (Animatable<T, V>.() -> Unit)? = null
)
```

